<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>R A S A SCALE</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#F6FBF8;
    --card:#fff;
    --accent:#2e8b57;
    --accent-dark:#256b45;
    --muted:#6b6f72;
    --shadow: rgba(39,50,56,0.08);
    --font:'Poppins',sans-serif;
  }
  *{box-sizing:border-box}
  body{font-family:var(--font);background:linear-gradient(180deg,var(--bg),#f0fbf5);margin:0;padding:24px;display:flex;justify-content:center}
  .container{width:100%;max-width:900px;background:var(--card);padding:28px;border-radius:14px;box-shadow:0 12px 30px var(--shadow);border:1px solid #e6f1ea}
  .page{display:none}
  .page.active{display:block}
  h1{color:var(--accent);margin:0 0 12px}
  .form-group{margin-bottom:12px}
  label{display:block;font-weight:600;color:#333;margin-bottom:6px}
  input[type=text]{width:100%;padding:10px;border-radius:8px;border:1px solid #ddd}
   }
    .scale input[type="radio"]:checked + .emoji-option::before {
      content: 'âœ…';
      display: block;
      font-size: 1rem;
      position: absolute;
      top: 0;
      left: 0;
    }
    .emoji-option {
      font-size: 1.5rem;
    }
    .emoji-option + span {
      margin-top: 5px;
      font-size: 0.9rem;
      font-weight: normal;
  .button{ }
    #intro-page button {
      padding: 15px 30px;
      border: none;
      border-radius: 50px;
      background-color: var(--secondary-color);
      color: green;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      margin-top: 2rem;
    }
    #intro-page button:hover {
      background-color: #2b914a;
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
    }
   }
    .page {
      display: none; /* Sembunyikan semua halaman secara default */
      text-align: left;
    }
    .page.active {
      display: block; /* Tampilkan halaman yang aktif */
    .button-group {
      text-align: center;
}
    }
    button {
      padding: 12px 24px;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
  }
    .scale input[type="radio"]:checked + .emoji-option::before {
      content: 'âœ…';
      display: block;
      font-size: 1rem;
      position: absolute;
      top: 0;
      left: 0;
    }
    .emoji-option {
      font-size: 1.5rem;
    }
    .emoji-option + span {
      margin-top: 5px;
      font-size: 0.9rem;
      font-weight: normal;
    }
    .section-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--primary-color);
      margin-top: 3rem;
      margin-bottom: 1.5rem;
    }

  .primary{background:var(--accent);color:white}
  .primary:hover{background:var(--accent-dark)}
  .question{margin-bottom:16px;padding:12px;border-radius:10px;background:#fbfffb;border:1px solid #e9f6ec}
  .scale{display:flex;gap:12px;flex-wrap:wrap}
  .scale label{display:flex;gap:6px;align-items:center;cursor:pointer;color:var(--muted)}
  .small{color:var(--muted);font-size:0.95rem}
  #overlay{display:none;position:fixed;inset:0;background:rgba(255,255,255,0.7);z-index:999;align-items:center;justify-content:center}
  #overlay.active{display:flex}
  .spinner{width:64px;height:64px;border-radius:50%;border:8px solid #e6f6ee;border-top-color:var(--accent);animation:spin 1s linear infinite}
  @keyframes spin{to{transform:rotate(360deg)}}
  footer{margin-top:20px;text-align:center;color:var(--muted);font-size:0.85rem}
  @media (max-width:600px){.scale{justify-content:center}}
</style>
</head>
<body>
  <div id="overlay"><div style="text-align:center"><div class="spinner"></div><div style="margin-top:10px;color:#355e45;font-weight:600">Memproses hasil...</div></div></div>

  <div class="container" role="main">
    <!-- INTRO -->
    <div id="intro-page" class="page active" aria-live="polite">
      <h1>RASA SCALE</h1>
      <p class="small">Isi data diri lalu tekan <strong>Bersedia</strong> untuk memulai.</p>
      <div class="form-group">
        <label for="name">Nama Lengkap</label>
        <input id="name" type="text" />
      </div>
      <div class="form-group">
        <label for="nrp">NRP</label>
        <input id="nrp" type="text" />
      </div>
      <div class="form-group">
        <label for="fakultas">Fakultas</label>
        <input id="fakultas" type="text" />
      </div>
      <div class="form-group">
        <label for="angkatan">Angkatan</label>
        <input id="angkatan" type="text" inputmode="numeric" />
      </div>
      <div style="text-align:center;margin-top:10px">
        <button id="startBtn" class="button primary">Bersedia</button>
      </div>
    </div>

    <!-- QUIZ -->
    <div id="quiz-page" class="page" aria-live="polite">
      <h2>Petunjuk</h2>
      <p class="small">Pilih satu jawaban yang paling sesuai untuk setiap pernyataan. ğŸ‘‡<br>
          <span class="emoji-scale">Skala: Sangat Tidak Setuju=ğŸ˜, Tidak Setuju=ğŸ˜”, Netral=ğŸ˜•, Agak Setuju=ğŸ™‚, Setuju=ğŸ˜„, Sangat Setuju=ğŸ¤©
.</p>

      <form id="quizForm" action="https://formspree.io/f/xkgqneyz" method="POST">
        <!-- Hidden untuk Google/backup -->
        <input type="hidden" name="nama" id="hiddenNameInput">
        <input type="hidden" name="nrp" id="hiddenNRPInput">
        <input type="hidden" name="fakultas" id="hiddenFakultasInput">
        <input type="hidden" name="angkatan" id="hiddenAngkatanInput">
        <input type="hidden" name="total_score" id="hiddenTotalScore">
        <input type="hidden" name="average_per_item" id="hiddenAverage">
        <input type="hidden" name="category" id="hiddenCategory">

        <!-- QUESTIONS 1..8 -->
        <div class="question">
          <strong>1.</strong> Ketika saya ingin membeli sesuatu, saya tahu persis berapa banyak uang yang saya miliki untuk dibelanjakan.
          <div class="scale">
              <span id="q1_label" class="sr-only"></span>
              <label>
                <input type="radio" name="q1" value="1" required>
                <span class="emoji-option">ğŸ˜</span>
              </label>
              <label>
                <input type="radio" name="q1" value="2" required>
                <span class="emoji-option">ğŸ˜”</span>
              </label>
              <label>
                <input type="radio" name="q1" value="3" required>
                <span class="emoji-option">ğŸ˜•</span>
              </label>
              <label>
                <input type="radio" name="q1" value="4" required>
                <span class="emoji-option">ğŸ™‚</span>
              </label>
              <label>
                <input type="radio" name="q1" value="5" required>
                <span class="emoji-option">ğŸ˜„</span>
              </label>
              <label>
                <input type="radio" name="q1" value="6" required>
                <span class="emoji-option">ğŸ¤©</span>
              </label>
            </div>
          </div>
          <div class="question">
            <p><strong>2.</strong> Setiap bulan, saya meninjau pengeluaran pada kartu kredit dan debit saya.</p>
            <div class="scale" role="radiogroup" aria-labelledby="q2_label">
              <span id="q2_label" class="sr-only"></span>
              <label>
                <input type="radio" name="q2" value="1" required>
                <span class="emoji-option">ğŸ˜</span>
              </label>
              <label>
                <input type="radio" name="q2" value="2" required>
                <span class="emoji-option">ğŸ˜”</span>
              </label>
              <label>
                <input type="radio" name="q2" value="3" required>
                <span class="emoji-option">ğŸ˜•</span>
              </label>
              <label>
                <input type="radio" name="q2" value="4" required>
                <span class="emoji-option">ğŸ™‚</span>
              </label>
              <label>
                <input type="radio" name="q2" value="5" required>
                <span class="emoji-option">ğŸ˜„</span>
              </label>
              <label>
                <input type="radio" name="q2" value="6" required>
                <span class="emoji-option">ğŸ¤©</span>
              </label>
            </div>
          </div>
          <div class="question">
            <p><strong>3.</strong>Saya sangat memperhatikan keuangan pribadi saya.</p>
            <div class="scale" role="radiogroup" aria-labelledby="q3_label">
              <span id="q3_label" class="sr-only"></span>
              <label>
                <input type="radio" name="q3" value="1" required>
                <span class="emoji-option">ğŸ˜</span>
              </label>
              <label>
                <input type="radio" name="q3" value="2" required>
                <span class="emoji-option">ğŸ˜”</span>
              </label>
              <label>
                <input type="radio" name="q3" value="3" required>
                <span class="emoji-option">ğŸ˜•</span>
              </label>
              <label>
                <input type="radio" name="q3" value="4" required>
                <span class="emoji-option">ğŸ™‚</span>
              </label>
              <label>
                <input type="radio" name="q3" value="5" required>
                <span class="emoji-option">ğŸ˜„</span>
              </label>
              <label>
                <input type="radio" name="q3" value="6" required>
                <span class="emoji-option">ğŸ¤©</span>
              </label>
            </div>
          </div>
          <div class="question">
            <p><strong>4.</strong> Saya hampir mengetahui secara pasti jumlah total uang yang saya miliki di seluruh rekening bank dan investasi.</p>
            <div class="scale" role="radiogroup" aria-labelledby="q4_label">
              <span id="q4_label" class="sr-only"></span>
              <label>
                <input type="radio" name="q4" value="1" required>
                <span class="emoji-option">ğŸ˜</span>
              </label>
              <label>
                <input type="radio" name="q4" value="2" required>
                <span class="emoji-option">ğŸ˜”</span>
              </label>
              <label>
                <input type="radio" name="q4" value="3" required>
                <span class="emoji-option">ğŸ˜•</span>
              </label>
              <label>
                <input type="radio" name="q4" value="4" required>
                <span class="emoji-option">ğŸ™‚</span>
              </label>
              <label>
                <input type="radio" name="q4" value="5" required>
                <span class="emoji-option">ğŸ˜„</span>
              </label>
              <label>
                <input type="radio" name="q4" value="6" required>
                <span class="emoji-option">ğŸ¤©</span>
              </label>
            </div>
          </div>

          <h2 class="section-title">Penerimaan (Acceptance)</h2>
          <div class="question">
            <p><strong>5.</strong> Filsafat pengelolaan uang pribadi saya adalah â€œtetap tenang dan lanjutkan.â€</p>
            <div class="scale" role="radiogroup" aria-labelledby="q5_label">
              <span id="q5_label" class="sr-only"></span>
              <label>
                <input type="radio" name="q5" value="1" required>
                <span class="emoji-option">ğŸ˜</span>
              </label>
              <label>
                <input type="radio" name="q5" value="2" required>
                <span class="emoji-option">ğŸ˜”</span>
              </label>
              <label>
                <input type="radio" name="q5" value="3" required>
                <span class="emoji-option">ğŸ˜•</span>
              </label>
              <label>
                <input type="radio" name="q5" value="4" required>
                <span class="emoji-option">ğŸ™‚</span>
              </label>
              <label>
                <input type="radio" name="q5" value="5" required>
                <span class="emoji-option">ğŸ˜„</span>
              </label>
              <label>
                <input type="radio" name="q5" value="6" required>
                <span class="emoji-option">ğŸ¤©</span>
              </label>
            </div>
          </div>
          <div class="question">
            <p><strong>6.</strong> Saya tidak dapat melihat laporan kartu kredit atau debit saya tanpa emosi mengambil alih. (RC)</p>
            <div class="scale" role="radiogroup" aria-labelledby="q6_label">
              <span id="q6_label" class="sr-only"></span>
              <label>
                <input type="radio" name="q6" value="1" required>
                <span class="emoji-option">ğŸ˜</span>
              </label>
              <label>
                <input type="radio" name="q6" value="2" required>
                <span class="emoji-option">ğŸ˜”</span>
              </label>
              <label>
                <input type="radio" name="q6" value="3" required>
                <span class="emoji-option">ğŸ˜•</span>
              </label>
              <label>
                <input type="radio" name="q6" value="4" required>
                <span class="emoji-option">ğŸ™‚</span>
              </label>
              <label>
                <input type="radio" name="q6" value="5" required>
                <span class="emoji-option">ğŸ˜„</span>
              </label>
              <label>
                <input type="radio" name="q6" value="6" required>
                <span class="emoji-option">ğŸ¤©</span>
              </label>
            </div>
          </div>
          <div class="question">
            <p><strong>7.</strong> Jika saldo rekening bank saya tidak seperti yang saya inginkan, saya merasa sulit untuk fokus pada hal lain. (RC)</p>
            <div class="scale" role="radiogroup" aria-labelledby="q7_label">
              <span id="q7_label" class="sr-only"></span>
              <label>
                <input type="radio" name="q7" value="1" required>
                <span class="emoji-option">ğŸ˜</span>
              </label>
              <label>
                <input type="radio" name="q7" value="2" required>
                <span class="emoji-option">ğŸ˜”</span>
              </label>
              <label>
                <input type="radio" name="q7" value="3" required>
                <span class="emoji-option">ğŸ˜•</span>
              </label>
              <label>
                <input type="radio" name="q7" value="4" required>
                <span class="emoji-option">ğŸ™‚</span>
              </label>
              <label>
                <input type="radio" name="q7" value="5" required>
                <span class="emoji-option">ğŸ˜„</span>
              </label>
              <label>
                <input type="radio" name="q7" value="6" required>
                <span class="emoji-option">ğŸ¤©</span>
                </label>
            </div>
          </div>
          <div class="question">
            <p><strong>8.</strong> Ketika ada perubahan dalam kehidupan finansial saya, saya sering bereaksi secara tidak rasional atau tidak pantas. (RC)</p>
            <div class="scale" role="radiogroup" aria-labelledby="q8_label">
              <span id="q8_label" class="sr-only"></span>
              <label>
                <input type="radio" name="q8" value="1" required>
                <span class="emoji-option">ğŸ˜</span>
              </label>
              <label>
                <input type="radio" name="q8" value="2" required>
                <span class="emoji-option">ğŸ˜”</span>
              </label>
              <label>
                <input type="radio" name="q8" value="3" required>
                <span class="emoji-option">ğŸ˜•</span>
              </label>
              <label>
                <input type="radio" name="q8" value="4" required>
                <span class="emoji-option">ğŸ™‚</span>
              </label>
              <label>
                <input type="radio" name="q8" value="5" required>
                <span class="emoji-option">ğŸ˜„</span>
              </label>
              <label>
                <input type="radio" name="q8" value="6" required>
                <span class="emoji-option">ğŸ¤©</span>
              </label>
            </div>
          </div>


        <div style="display:flex;gap:12px;align-items:center;margin-top:10px">
          <button type="button" id="submitBtn" class="button primary">Lihat Hasil</button>
          <div class="small">Semua pertanyaan wajib diisi.</div>
        </div>
      </form>

    </div>

    <!-- RESULT -->
    <div id="result-page" class="page" aria-live="polite">
      <h2>Hasil Kuesioner Anda ğŸ‰</h2>
      <div id="resultIcon" style="font-size:48px;margin:8px 0">ğŸ™‚</div>
      <div id="score-display" style="font-weight:700;color:var(--accent)">Skor Total: -</div>
      <div id="category-display" style="margin-top:6px;font-weight:700">Kategori: -</div>
      <p id="category-description" class="small">-</p>
      <div style="display:flex;gap:12px;margin-top:12px">
        <button id="downloadBtn" class="button">Download / Print</button>
        <button id="restartBtn" class="button primary">Kembali ke Awal</button>
      </div>
      <footer style="margin-top:18px;color:var(--muted)">Kelompok 5 KP B â€” Pengukuran Skala Psikologi â€¢ Universitas Surabaya</footer>
    </div>

  </div> <!-- container -->

<script>
/* ====== CONFIG ====== */
/* GANTI nilai ini dengan URL Web App yang kamu dapat dari Google Apps Script deploy */
const GOOGLE_SCRIPT_URL = "GOOGLE_SCRIPT_URL"; // <-- ganti setelah deploy Apps Script
const FORMSPREE_ACTION = "https://formspree.io/f/xkgqneyz"; // fallback

/* ====== APP ====== */
document.addEventListener('DOMContentLoaded', function(){
  // elemen
  const introPage = document.getElementById('intro-page');
  const quizPage = document.getElementById('quiz-page');
  const resultPage = document.getElementById('result-page');
  const startBtn = document.getElementById('startBtn');
  const submitBtn = document.getElementById('submitBtn');
  const restartBtn = document.getElementById('restartBtn');
  const overlay = document.getElementById('overlay');

  const hiddenName = document.getElementById('hiddenNameInput');
  const hiddenNRP = document.getElementById('hiddenNRPInput');
  const hiddenFakultas = document.getElementById('hiddenFakultasInput');
  const hiddenAngkatan = document.getElementById('hiddenAngkatanInput');
  const hiddenTotalScore = document.getElementById('hiddenTotalScore');
  const hiddenCategory = document.getElementById('hiddenCategory');
  const hiddenAverage = document.getElementById('hiddenAverage');

  const resultIcon = document.getElementById('resultIcon');
  const scoreDisplay = document.getElementById('score-display');
  const categoryDisplay = document.getElementById('category-display');
  const categoryDescription = document.getElementById('category-description');

  function showPage(id){
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    window.scrollTo({top:0,behavior:'smooth'});
  }

  // start
  startBtn.addEventListener('click', function(){
    const name = document.getElementById('name').value.trim();
    const nrp = document.getElementById('nrp').value.trim();
    const fakultas = document.getElementById('fakultas').value.trim();
    const angkatan = document.getElementById('angkatan').value.trim();
    if(!name || !nrp || !fakultas || !angkatan){
      alert('Mohon lengkapi data diri dulu.');
      return;
    }
    hiddenName.value = name;
    hiddenNRP.value = nrp;
    hiddenFakultas.value = fakultas;
    hiddenAngkatan.value = angkatan;
    showPage('quiz-page');
  });

  function getChecked(name){
    const el = document.querySelector('input[name="'+name+'"]:checked');
    return el ? parseInt(el.value,10) : null;
  }

  function calculateTotal(){
    const qs = ['q1','q2','q3','q4','q5','q6','q7','q8'];
    const reversed = ['q6','q7','q8'];
    const max = 6;
    let total = 0;
    for(let i=0;i<qs.length;i++){
      const v = getChecked(qs[i]);
      if(v === null) return { ok:false, missing: qs[i] };
      if(reversed.includes(qs[i])) total += (max + 1 - v);
      else total += v;
    }
    return { ok:true, total: total };
  }

  // interpretasi per-rata item (norma)
  function interpretByAverage(avg){
    if(avg < 3.455) return { label:"Mindfulness Keuangan: RENDAH", color:'#e74c3c', icon:'ğŸ˜”', desc:"Hasil ini menunjukkan Anda mungkin memiliki kesadaran dan penerimaan yang rendah terhadap keuangan pribadi. Mulailah dengan membuat anggaran sederhana dan melacak pengeluaran untuk meningkatkan pemahaman Anda." };
    if(avg >= 3.455 && avg <= 4.010) return { label:"Mindfulness Keuangan: SEDANG", color:'#f39c12', icon:'ğŸ¤”', desc:"Anda memiliki kesadaran dan penerimaan yang cukup baik, tetapi masih ada ruang untuk perbaikan. Coba luangkan waktu setiap bulan untuk meninjau laporan keuangan Anda dan identifikasi area yang bisa ditingkatkan." };
    if(avg >= 4.011 && avg <= 5.122) return { label:"Mindfulness Keuangan: TINGGI", color:'#34a853', icon:'ğŸ¥³', desc:"Selamat! Anda menunjukkan tingkat kesadaran dan penerimaan yang tinggi terhadap keuangan pribadi. Pertahankan kebiasaan positif ini dan teruslah belajar untuk mencapai tujuan finansial Anda." };
    if(avg >= 5.123 && avg <= 5.678) return { label:"Mindfulness Keuangan: SANGAT TINGGI", color:'#2ecc71', icon:'ğŸ†', desc:"Anda sudah sangat sadar dan mampu mengelola keuangan dengan sangat baik. Tingkatkan literasi keuangan untuk semakin kuat dalam pengambilan keputusan." };
    return { label:"Mindfulness Keuangan: ISTIMEWA", color:'#1abc9c', icon:'ğŸŒŸ', desc:"Anda memiliki tingkat mindfulness keuangan yang luar biasa. Terus pertahankan kebiasaan hebat ini!" };
  }

  // submit
  submitBtn.addEventListener('click', function(){
    const res = calculateTotal();
    if(!res.ok){
      alert('Pertanyaan ' + res.missing + ' belum dijawab.');
      return;
    }

    const total = res.total;
    const avg = +(total / 8).toFixed(3);

    // fill hidden inputs
    hiddenTotalScore.value = total;
    hiddenAverage.value = avg;
    const info = interpretByAverage(avg);
    hiddenCategory.value = info.label;

    // overlay
    overlay.classList.add('active');

    // show result after short delay
    setTimeout(() => {
      overlay.classList.remove('active');
      resultIcon.textContent = info.icon;
      scoreDisplay.textContent = `Skor Total: ${total} (Rata-rata per item: ${avg})`;
      categoryDisplay.textContent = info.label;
      categoryDisplay.style.color = info.color;
      categoryDescription.textContent = info.desc;
      showPage('result-page');
    }, 700);

    // Prepare payload for Google Apps Script
    const payload = {
      nama: hiddenName.value,
      nrp: hiddenNRP.value,
      fakultas: hiddenFakultas.value,
      angkatan: hiddenAngkatan.value,
      total_score: total,
      average_per_item: avg,
      category: info.label,
      q1: document.querySelector('input[name="q1"]:checked').value,
      q2: document.querySelector('input[name="q2"]:checked').value,
      q3: document.querySelector('input[name="q3"]:checked').value,
      q4: document.querySelector('input[name="q4"]:checked').value,
      q5: document.querySelector('input[name="q5"]:checked').value,
      q6: document.querySelector('input[name="q6"]:checked').value,
      q7: document.querySelector('input[name="q7"]:checked').value,
      q8: document.querySelector('input[name="q8"]:checked').value
    };

    // 1) Kirim ke Google Apps Script (jika URL sudah diganti)
    if (GOOGLE_SCRIPT_URL && GOOGLE_SCRIPT_URL !== "GOOGLE_SCRIPT_URL") {
      fetch(GOOGLE_SCRIPT_URL, {
        method: 'POST',
        mode: 'cors',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      }).then(r => r.json()).then(data => {
        console.log("Tersimpan ke Google Sheet:", data);
      }).catch(err => {
        console.warn("Gagal kirim ke Google:", err);
      });
    } else {
      console.warn("GOOGLE_SCRIPT_URL belum diatur â€” hasil tidak dikirim ke Google Sheet.");
    }

    // 2) Kirim ke Formspree juga (backup), supaya kamu punya backup di formspree
    const formData = new FormData();
    for(const k in payload) formData.append(k, payload[k]);
    // juga tambahkan nama fields hidden supaya Formspree menerima
    formData.append('nama', hiddenName.value);

    fetch(FORMSPREE_ACTION, {
      method: 'POST',
      body: formData,
      headers: { 'Accept': 'application/json' }
    }).then(resp => {
      if (resp.ok) console.log("Terkirim ke Formspree (backup)");
      else console.warn("Formspree returned non-ok");
    }).catch(e => console.warn("Formspree error", e));
  });

  // print/download
  document.getElementById('downloadBtn').addEventListener('click', function(){
    window.print();
  });

  // restart
  restartBtn.addEventListener('click', function(){
    // reset form and go back
    document.getElementById('quizForm').reset();
    showPage('intro-page');
  });

});
</script>
</body>
</html>
